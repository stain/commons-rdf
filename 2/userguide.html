<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 24 April 2015
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150424" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Apache Commons RDF &#x2013; User Guide</title>

	<link rel="stylesheet" href="./css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="./css/site.css" type="text/css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

	<script type="text/javascript" src="./js/jquery.min.js"></script>
	<script type="text/javascript" src="./js/bootstrap.min.js"></script>
	<script type="text/javascript" src="./js/prettify.min.js"></script>
	<script type="text/javascript" src="./js/site.js"></script>

                            
<meta name="viewport" content="width=device-width, initial-scale=1"/>                                
<style type="text/css">/* Override prettify.css, nicer fonts for code examples */
    		.source .source pre {
    			font-family: Monaco,Menlo,Consolas,Inconsolata,monospace;
    		}
    		/* COMMONSSITE-82 workaround */
    		.nav-list li.collapsed a {
    			background-repeat: no-repeat;
    			background-position: 16px 9px;
    		}</style>                                
<link rel="stylesheet" href="./css/prettify.css" media="all" type="text/css"/>                                
<script src="./js/prettify.js" type="text/javascript"></script>                                
<script type="text/javascript">window.onload=function() {
              prettyPrint();
          }</script>                  
      </head>

	<body class="composite">
                                        <a href="./" id="bannerLeft" title="Apache Commons RDF logo">
                                                                                                <img class="logo-left" src="images/commonsrdf-logo.png"  alt="Apache Commons RDF logo"/>
                </a>
                		<div class="clear"></div>

		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://commonsrdf.incubator.apache.org">Commons RDF &trade;</a>
					<ul class="nav">      
                    
            <li id="publishDate">Last Published: 24 April 2015</li>
      <li class="divider">|</li> <li id="projectVersion">Version: 0.1.0-incubating-SNAPSHOT</li>
  </ul>
                    <div class="pull-right">	<ul class="nav">
						<li>
		              <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
  		</li>
					<li>
		              <a href="http://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
  		</li>
					<li>
		              <a href="http://commons.apache.org/" class="externalLink" title="Commons">
    Commons</a>
  		</li>
					<li>
		              <a href="http://incubator.apache.org/" class="externalLink" title="Incubator">
    Incubator</a>
  		</li>
		</ul>
</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<table class="layout-table">
				<tr>
					<td class="sidebar">
						<div class="well sidebar-nav">
										<ul class="nav nav-list">
		 		            						 <li class="nav-header">Project</li>
																				<li class="none">
		              <a href="index.html" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="apidocs/index.html?org/apache/commons/rdf/api/package-summary.html" title="API">
    API</a>
  				</li>
 															<li class="none active">
		              <a href="userguide.html" title="User Guide">
    User Guide</a>
  				</li>
 														<li class="none">
		              <a href="download.html" title="Download">
    Download</a>
  				</li>
 														<li class="none">
		              <a href="contributing.html" title="Contributing">
    Contributing</a>
  				</li>
 														<li class="none">
		              <a href="team-list.html" title="Team">
    Team</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Tools</li>
																				<li class="none">
		              <a href="mail-lists.html" title="Mailing Lists">
    Mailing Lists</a>
  				</li>
 														<li class="none">
		              <a href="https://git-wip-us.apache.org/repos/asf/incubator-commonsrdf.git" class="externalLink" title="Source (Git)">
    Source (Git)</a>
  				</li>
 														<li class="none">
		              <a href="https://issues.apache.org/jira/browse/COMMONSRDF" class="externalLink" title="Issues (Jira)">
    Issues (Jira)</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            									 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
																								                                                              								<li class="collapsed">
		              <a href="project-info.html" title="Project Information">
    Project Information</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">Commons</li>
																				<li class="none">
		              <a href="http://commons.apache.org/" class="externalLink" title="Home">
    Home</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
  				</li>
 																		                          								<li class="collapsed">
		              <a href="http://commons.apache.org/components.html" class="externalLink" title="Components">
    Components</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="http://commons.apache.org/sandbox/index.html" class="externalLink" title="Sandbox">
    Sandbox</a>
  									</li>
 																		                          								<li class="collapsed">
		              <a href="http://commons.apache.org/dormant/index.html" class="externalLink" title="Dormant">
    Dormant</a>
  									</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">General Information</li>
																				<li class="none">
		              <a href="security.html" title="Security">
    Security</a>
  				</li>
 														<li class="none">
		              <a href="http://commons.apache.org/volunteering.html" class="externalLink" title="Volunteering">
    Volunteering</a>
  				</li>
 														<li class="none">
		              <a href="http://commons.apache.org/patches.html" class="externalLink" title="Contributing Patches">
    Contributing Patches</a>
  				</li>
 														<li class="none">
		              <a href="http://commons.apache.org/building.html" class="externalLink" title="Building Components">
    Building Components</a>
  				</li>
 														<li class="none">
		              <a href="http://commons.apache.org/commons-parent-pom.html" class="externalLink" title="Commons Parent Pom">
    Commons Parent Pom</a>
  				</li>
 														<li class="none">
		              <a href="http://commons.apache.org/build-plugin/index.html" class="externalLink" title="Commons Build Plugin">
    Commons Build Plugin</a>
  				</li>
 														<li class="none">
		              <a href="http://commons.apache.org/releases/index.html" class="externalLink" title="Releasing Components">
    Releasing Components</a>
  				</li>
 														<li class="none">
		              <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
  				</li>
 								</ul>
			<ul class="nav nav-list">
		 		            						 <li class="nav-header">ASF</li>
																				<li class="none">
		              <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
  				</li>
 														<li class="none">
		              <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
  				</li>
 								</ul>
							</div>
						<div id="poweredBy">
							                                                                                                      <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
          						</div>
					</td>
					<td class="content">
						<h1>User Guide</h1>
<p>This page shows some examples of a client using the Commons RDF API.</p>
<div class="section">
<h2><a name="Using_Commons_RDF_from_Maven"></a>Using Commons RDF from Maven</h2>
<p>To use Commons RDF API from an <a class="externalLink" href="http://maven.apache.org/">Apache Maven</a> projects, add the following dependency to your <tt>pom.xml</tt>:</p>

<div class="source">
<div class="source">
<pre>&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
        &lt;artifactId&gt;commons-rdf-api&lt;/artifactId&gt;
        &lt;version&gt;0.1-incubating-SNAPSHOT&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</pre></div></div>
<p>If you are testing a <tt>SNAPSHOT</tt> version, then you will have to either build Commons RDF from <a class="externalLink" href="https://github.com/apache/incubator-commonsrdf">source</a>, or add the <a class="externalLink" href="https://github.com/apache/incubator-commonsrdf#snapshot-repository">snapshot repository</a>:</p>

<div class="source">
<div class="source">
<pre>&lt;repositories&gt;
  &lt;repository&gt;
    &lt;id&gt;apache.snapshots&lt;/id&gt;
    &lt;name&gt;Apache Snapshot Repository&lt;/name&gt;
    &lt;url&gt;http://repository.apache.org/snapshots&lt;/url&gt;
    &lt;releases&gt;
      &lt;enabled&gt;false&lt;/enabled&gt;
    &lt;/releases&gt;
  &lt;/repository&gt;
&lt;/repositories&gt;
</pre></div></div>
<p>As Commons RDF requires Java 8 or later, you will also need:</p>

<div class="source">
<div class="source">
<pre>&lt;properties&gt;
  &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
  &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
&lt;/properties&gt;
</pre></div></div>
<p>In the examples below we will use the <a href="apidocs/org/apache/commons/rdf/simple/package-summary.html"><i>simple</i> implementation</a>, but the examples should be equally applicable to other implementations. To add a dependency for the <i>simple</i> implementation, add to your <tt>&lt;dependencies&gt;</tt>:</p>

<div class="source">
<div class="source">
<pre>    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
        &lt;artifactId&gt;commons-rdf-simple&lt;/artifactId&gt;
        &lt;version&gt;0.1.0-incubating-SNAPSHOT&lt;/version&gt;
    &lt;/dependency&gt;
</pre></div></div></div>
<div class="section">
<h2><a name="Creating_RDFTerm_instances"></a>Creating RDFTerm instances</h2>
<p>To create instances of Commons RDF interfaces like <a href="apidocs/org/apache/commons/rdf/api/Graph.html"><tt>Graph</tt></a> and <a href="apidocs/org/apache/commons/rdf/api/IRI.html"><tt>IRI</tt></a> you will need a <a href="/apidocs/org/apache/commons/rdf/api/RDFTermFactory.html">RDFTermFactory</a>.</p>
<p>How to get an instance of this factory is implementation specific, for the <i>simple</i> implementation, you can construct the <a href="apidocs/org/apache/commons/rdf/simple/SimpleRDFTermFactory.html">SimpleRDFTermFactory</a>:</p>

<div class="source">
<div class="source">
<pre>import org.apache.commons.rdf.api.RDFTermFactory;
import org.apache.commons.rdf.simple.SimpleRDFTermFactory;
// ..
RDFTermFactory rdfTermFactory = new SimpleRDFTermFactory();
</pre></div></div>
<p>Using the factory you can construct any <a href="apidocs/org/apache/commons/rdf/api/RDFTerm.html">RDFTerm</a>, e.g. to create a <a href="apidocs/org/apache/commons/rdf/api/BlankNode.html">BlankNode</a>, <a href="apidocs/org/apache/commons/rdf/api/IRI.html">IRI</a> and <a href="apidocs/org/apache/commons/rdf/api/Literal.html">Literal</a>:</p>

<div class="source">
<div class="source">
<pre>BlankNode blankNode = factory.createBlankNode();
IRI iri = factory.createIRI(&quot;http://example.com/name&quot;);
Literal literal = factory.createLiteral(&quot;Alice&quot;);
</pre></div></div>
<p>You can also create a stand-alone <a href="apidocs/org/apache/commons/rdf/api/Triple.html">Triple</a>:</p>

<div class="source">
<div class="source">
<pre>Triple triple = factory.createTriple(blankNode, iri, literal);
</pre></div></div>
<p>The <a href="apidocs/org/apache/commons/rdf/api/RDFTermFactory.html">RDFTermFactory</a> also contains more specific variants of some of the methods above, e.g. to create a typed literal. </p>
<p>Note that for any given implementation, <tt>RDFTerm</tt> instances need not be created using a <tt>RDFTermFactory</tt>. More likely, implementation-specific methods might create these objects as part of data parsing, storage lookup and queries.</p></div>
<div class="section">
<h2><a name="Graph"></a>Graph</h2>
<p>A <a href="apidocs/org/apache/commons/rdf/api/Graph.html">Graph</a> is a collection of <a href="apidocs/org/apache/commons/rdf/api/Triple.html">Triple</a>s.</p>
<p>To create a graph from a <tt>RDFTermFactory</tt>, use <a href="apidocs/org/apache/commons/rdf/api/RDFTermFactory.html#createGraph--">createGraph()</a>:</p>

<div class="source">
<div class="source">
<pre>Graph graph = factory.createGraph();
</pre></div></div>
<p>Implementations will typically also have other ways of retrieving a <tt>Graph</tt>, e.g. by parsing a Turtle file or connecting to a storage backend.</p>
<div class="section">
<h3><a name="Adding_triples"></a>Adding triples</h3>
<p><i>Note: Some <tt>Graph</tt> implementations are immutable, in which case the below may throw an <tt>UnsupportedOperationException</tt></i>.</p>
<p>Given the <a href="#Creating_RDFTerm_instances">previous example</a>, we can <a href="apidocs/org/apache/commons/rdf/api/Graph.html#add-org.apache.commons.rdf.api.Triple-">add</a> the triple to the graph:</p>

<div class="source">
<div class="source">
<pre>graph.add(triple);
</pre></div></div>
<p>As an alternative to creating the <tt>Triple</tt> first, you can use the expanded <i>subject/predicate/object</i> form of [Graph.add](apidocs/org/apache/commons/rdf/api/Graph.html#add-org.apache.commons.rdf.api.BlankNodeOrIRI-org.apache.commons.rdf.api.IRI-org.apache.commons.rdf.api.RDFTerm-()):</p>

<div class="source">
<div class="source">
<pre>IRI bob = factory.createIRI(&quot;http://example.com/bob&quot;);
Literal bobName = factory.createLiteral(&quot;Bob&quot;);
graph.add(bob, iri, bobName);
</pre></div></div>
<p>It is not necessary to check if a triple already exist in the graph, as the underlying implementation will ignore duplicate triples.</p></div>
<div class="section">
<h3><a name="Finding_triples"></a>Finding triples</h3>
<p>You can check if the graph <a href="apidocs/org/apache/commons/rdf/api/Graph.html#contains-org.apache.commons.rdf.api.Triple-">contains</a> a triple:</p>

<div class="source">
<div class="source">
<pre>System.out.println(graph.contains(triple));
</pre></div></div>

<blockquote>
<p><tt>true</tt></p>
</blockquote>
<p>The expanded subject/predicate/object call for <a href="apidocs/org/apache/commons/rdf/api/Graph.html#contains-org.apache.commons.rdf.api.BlankNodeOrIRI-org.apache.commons.rdf.api.IRI-org.apache.commons.rdf.api.RDFTerm-">Graph.contains()</a> can be used without needing to create a <tt>Triple</tt> first, and also allow <tt>null</tt> as a wildcard parameters:</p>

<div class="source">
<div class="source">
<pre>System.out.println(graph.contains(null, iri, bobName));
</pre></div></div>

<blockquote>
<p><tt>true</tt></p>
</blockquote></div>
<div class="section">
<h3><a name="Size"></a>Size</h3>
<p>The <a href="apidocs/org/apache/commons/rdf/api/Graph.html#size--">size</a> of a graph is the count of unique triples:</p>

<div class="source">
<div class="source">
<pre>System.out.println(graph.size());
</pre></div></div>

<blockquote>
<p><tt>2</tt></p>
</blockquote>
<p><i>Note: In some implementations with large graphs, calculating the size can be an expensive operation.</i></p></div>
<div class="section">
<h3><a name="Iterating_over_triples"></a>Iterating over triples</h3>
<p>The <a href="apidocs/org/apache/commons/rdf/api/Graph.html#iterate--">iterate</a> method can be used to sequentially iterate over all the triples of the graph:</p>

<div class="source">
<div class="source">
<pre>for (Triple t : graph.iterate()) {
  System.out.println(t.getObject());
}
</pre></div></div>

<blockquote>
<p><tt>&quot;Alice&quot;</tt></p>
<p><tt>&quot;Bob&quot;</tt></p>
</blockquote>
<p>The expanded <a href="apidocs/org/apache/commons/rdf/api/Graph.html#iterate-org.apache.commons.rdf.api.BlankNodeOrIRI-org.apache.commons.rdf.api.IRI-org.apache.commons.rdf.api.RDFTerm-">iterate</a> method takes a <i>subject/predicate/object</i> filter which permits the <tt>null</tt> wildcard:</p>

<div class="source">
<div class="source">
<pre>for (Triple t : graph.iterate(null, null, bobName)) {
  System.out.println(t.getPredicate());
}
</pre></div></div>

<blockquote>
<p><tt>&lt;http://example.com/name&gt;</tt></p>
</blockquote></div>
<div class="section">
<h3><a name="Stream_of_triples"></a>Stream of triples</h3>
<p>For processing of larger graphs, and to access more detailed filtering and processing, the <a href="apidocs/org/apache/commons/rdf/api/Graph.html#getTriples--">getTriples</a> method return a Java 8 <a class="externalLink" href="http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html">Stream</a>.</p>

<div class="source">
<div class="source">
<pre>Stream&lt;Object&gt; subjects = graph.getTriples().map(t -&gt; t.getSubject());
String s = subjects.map(Object::toString).collect(Collectors.joining(&quot; &quot;));
System.out.println(s);
</pre></div></div>

<blockquote>
<p><tt>&quot;Alice&quot; &quot;Bob&quot;</tt></p>
</blockquote>
<p>For details about what can be done with a stream, see the <a class="externalLink" href="http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html">java.util.stream documentation</a>.</p>
<p>Note that by default the stream will be parallel, use <a class="externalLink" href="http://docs.oracle.com/javase/8/docs/api/java/util/stream/BaseStream.html#sequential--">.sequential()</a> if your stream operations need to interact with objects that are not thread-safe.</p>
<p>Streams allow advanced <a class="externalLink" href="http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#filter-java.util.function.Predicate-">filter predicates</a>, but you may find that simple <i>subject/predicate/object</i> patterns are handled more efficiently by the expanded <a class="externalLink" href="http://commonsrdf.incubator.apache.org/apidocs/org/apache/commons/rdf/api/Graph.html#getTriples-org.apache.commons.rdf.api.BlankNodeOrIRI-org.apache.commons.rdf.api.IRI-org.apache.commons.rdf.api.RDFTerm-">getTriples</a> method. These can of course be combined:</p>

<div class="source">
<div class="source">
<pre>Stream&lt;? extends Triple&gt; namedB = graph.getTriples(null, nameIri, null).
    filter(t -&gt; t.getObject().ntriplesString().contains(&quot;B&quot;));
System.out.println(namedB.map(t -&gt; t.getSubject()).findAny().get());
</pre></div></div>

<blockquote>
<p><tt>&lt;http://example.com/bob&gt;</tt></p>
</blockquote></div>
<div class="section">
<h3><a name="Removing_triples"></a>Removing triples</h3>
<p>Triples can be <a href="apidocs/org/apache/commons/rdf/api/Graph.html#remove-org.apache.commons.rdf.api.Triple-">removed</a> from a graph:</p>

<div class="source">
<div class="source">
<pre>graph.remove(triple);
System.out.println(graph.contains(triple));
</pre></div></div>
<p>The expanded subject/predicate/object form of <a href="apidocs/org/apache/commons/rdf/api/Graph.html#remove-org.apache.commons.rdf.api.BlankNodeOrIRI-org.apache.commons.rdf.api.IRI-org.apache.commons.rdf.api.RDFTerm-">remove()</a> can be used without needing to construct a <tt>Triple</tt> first. It also allow <tt>null</tt> as a wildcard pattern:</p>

<div class="source">
<div class="source">
<pre>graph.remove(null, iri, null);
</pre></div></div>
<p>To remove all triples, use <a href="apidocs/org/apache/commons/rdf/api/Graph.html#clear--">clear</a>:</p>

<div class="source">
<div class="source">
<pre>graph.clear();
System.out.println(graph.contains(null, null, null));
</pre></div></div>

<blockquote>
<p>false</p>
</blockquote></div></div>
<div class="section">
<h2><a name="IRI_Literal_BlankNode"></a>IRI, Literal, BlankNode</h2>
<p><b>TODO:</b></p>

<ul>
  
<li><a href="apidocs/org/apache/commons/rdf/api/BlankNode.html">BlankNode</a></li>
  
<li><a href="apidocs/org/apache/commons/rdf/api/IRI.html">IRI</a></li>
  
<li><a href="apidocs/org/apache/commons/rdf/api/Literal.html">Literal</a></li>
</ul></div>
<div class="section">
<h2><a name="Types"></a>Types</h2>
<p><b>TODO:</b> <a href="apidocs/org/apache/commons/rdf/simple/Types.html">Types</a></p></div>
<div class="section">
<h2><a name="Full_example"></a>Full example</h2>
<p><b>TODO:</b> Serialize as n-triples example</p></div>
					</td>
				</tr>
			</table>
		</div>

		<div class="footer">
			<p>Copyright &copy;                    2015
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                                          				
<div class="center">Apache Commons, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                          		</div>
	</body>

</html>
