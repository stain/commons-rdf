<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Dataset.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Commons RDF: API</a> &gt; <a href="index.source.html" class="el_package">org.apache.commons.rdf.api</a> &gt; <span class="el_source">Dataset.java</span></div><h1>Dataset.java</h1><pre class="source lang-java linenums">/**
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements. See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership. The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * &quot;License&quot;); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.apache.commons.rdf.api;

import java.util.ConcurrentModificationException;
import java.util.Iterator;
import java.util.Optional;
import java.util.stream.Stream;

/**
 * An &lt;a href=&quot;http://www.w3.org/TR/rdf11-concepts/#section-rdf-dataset&quot;&gt; RDF
 * 1.1 dataset&lt;/a&gt;, a set of RDF quads, as defined by
 * &lt;a href=&quot;http://www.w3.org/TR/rdf11-concepts/&quot; &gt;RDF-1.1 Concepts and Abstract
 * Syntax&lt;/a&gt;, a W3C Recommendation published on 25 February 2014.
 * 
 * @since 0.3.0-incubating
 * @see RDF#createDataset()
 */
public interface Dataset extends AutoCloseable, GraphLike&lt;Quad&gt; {

    /**
     * Add a quad to the dataset, possibly mapping any of the components of the
     * Quad to those supported by this dataset.
     *
     * @param quad
     *            The quad to add
     */
    void add(Quad quad);

    /**
     * Add a quad to the dataset, possibly mapping any of the components to
     * those supported by this dataset.
     *
     * @param graphName
     *            The graph the quad belongs to, or &lt;code&gt;null&lt;/code&gt; for the
     *            default graph
     * @param subject
     *            The quad subject
     * @param predicate
     *            The quad predicate
     * @param object
     *            The quad object
     */
    void add(BlankNodeOrIRI graphName, BlankNodeOrIRI subject, IRI predicate, RDFTerm object);

    /**
     * Check if dataset contains quad.
     *
     * @param quad
     *            The quad to check.
     * @return True if the dataset contains the given Quad.
     */
    boolean contains(Quad quad);

    /**
     * Check if dataset contains a pattern of quads.
     *
     * @param graphName
     *            The graph the quad belongs to, wrapped as an {@link Optional}
     *            (&lt;code&gt;null&lt;/code&gt; is a wildcard, {@link Optional#empty()} is
     *            the default graph)
     * @param subject
     *            The quad subject (&lt;code&gt;null&lt;/code&gt; is a wildcard)
     * @param predicate
     *            The quad predicate (&lt;code&gt;null&lt;/code&gt; is a wildcard)
     * @param object
     *            The quad object (&lt;code&gt;null&lt;/code&gt; is a wildcard)
     * @return True if the dataset contains any quads that match the given
     *         pattern.
     */
    boolean contains(Optional&lt;BlankNodeOrIRI&gt; graphName, BlankNodeOrIRI subject, IRI predicate, RDFTerm object);

    /**
     * Close the dataset, relinquishing any underlying resources.
     * &lt;p&gt;
     * For example, this would close any open file and network streams and free
     * database locks held by the dataset implementation.
     * &lt;p&gt;
     * The behaviour of the other dataset methods are undefined after closing
     * the dataset.
     * &lt;p&gt;
     * Implementations might not need {@link #close()}, hence the default
     * implementation does nothing.
     */
    @Override
    default void close() throws Exception {
<span class="nc" id="L102">    }</span>

    /**
     * Get the default graph of this dataset.
     * &lt;p&gt;
     * The {@link Triple}s of the default graph are equivalent to the
     * {@link Quad}s in this Dataset which has the {@link Quad#getGraphName()}
     * set to {@link Optional#empty()}.
     * &lt;p&gt;
     * It is unspecified if modifications to the returned Graph are reflected in
     * this Dataset.
     * &lt;p&gt;
     * The returned graph MAY be empty.
     * 
     * @see #getGraph(BlankNodeOrIRI)
     * @return The default graph of this Dataset
     */
    Graph getGraph();

    /**
     * Get a named graph in this dataset.
     * &lt;p&gt;
     * The {@link Triple}s of the named graph are equivalent to the the Quads of
     * this Dataset which has the {@link Quad#getGraphName()} equal to the
     * provided &lt;code&gt;graphName&lt;/code&gt;, or equal to {@link Optional#empty()} if
     * the provided &lt;code&gt;graphName&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;.
     * &lt;p&gt;
     * It is unspecified if modifications to the returned Graph are reflected in
     * this Dataset.
     * &lt;p&gt;
     * It is unspecified if requesting an unknown or empty graph will return
     * {@link Optional#empty()} or create a new empty {@link Graph}.
     * 
     * @see #getGraph()
     * @see #getGraphNames()
     * @param graphName
     *            The name of the graph, or &lt;code&gt;null&lt;/code&gt; for the default
     *            graph.
     * @return The named Graph, or {@link Optional#empty()} if the dataset do
     *         not contain the named graph.
     */
    Optional&lt;Graph&gt; getGraph(BlankNodeOrIRI graphName);

    /**
     * Get the graph names in this Dataset.
     * &lt;p&gt;
     * The set of returned graph names is equivalent to the set of unique
     * {@link Quad#getGraphName()} of all the {@link #stream()} of this dataset
     * (excluding the default graph).
     * &lt;p&gt;
     * The returned {@link Stream} SHOULD NOT contain duplicate graph names.
     * &lt;p&gt;
     * The graph names can be used with {@link #getGraph(BlankNodeOrIRI)} to
     * retrieve the corresponding {@link Graph}, however callers should be aware
     * of any concurrent modifications to the Dataset may cause such calls to
     * return {@link Optional#empty()}.
     * &lt;p&gt;
     * Note that a Dataset always contains a &lt;strong&gt;default graph&lt;/strong&gt;
     * which is not named, and thus is not represented in the returned Stream.
     * The default graph is accessible via {@link #getGraph()} or by using
     * {@link Optional#empty()} in the Quad access methods).
     * 
     * @return A {@link Stream} of the graph names of this Dataset.
     */
    Stream&lt;BlankNodeOrIRI&gt; getGraphNames();

    /**
     * Remove a concrete quad from the dataset.
     *
     * @param quad
     *            quad to remove
     */
    void remove(Quad quad);

    /**
     * Remove a concrete pattern of quads from the default graph of the dataset.
     *
     * @param graphName
     *            The graph the quad belongs to, wrapped as an {@link Optional}
     *            (&lt;code&gt;null&lt;/code&gt; is a wildcard, {@link Optional#empty()} is
     *            the default graph)
     * @param subject
     *            The quad subject (&lt;code&gt;null&lt;/code&gt; is a wildcard)
     * @param predicate
     *            The quad predicate (&lt;code&gt;null&lt;/code&gt; is a wildcard)
     * @param object
     *            The quad object (&lt;code&gt;null&lt;/code&gt; is a wildcard)
     */
    void remove(Optional&lt;BlankNodeOrIRI&gt; graphName, BlankNodeOrIRI subject, IRI predicate, RDFTerm object);

    /**
     * Clear the dataset, removing all quads.
     */
    void clear();

    /**
     * Number of quads contained by the dataset.
     * &lt;p&gt;
     * The count of a set does not include duplicates, consistent with the
     * {@link Quad#equals(Object)} equals method for each {@link Quad}.
     *
     * @return The number of quads in the dataset
     */
    long size();

    /**
     * Get all quads contained by the dataset.&lt;br&gt;
     * &lt;p&gt;
     * The iteration does not contain any duplicate quads, as determined by the
     * {@link Quad#equals(Object)} method for each {@link Quad}.
     * &lt;p&gt;
     * The behaviour of the {@link Stream} is not specified if
     * {@link #add(Quad)}, {@link #remove(Quad)} or {@link #clear()} are called
     * on the {@link Dataset} before it terminates.
     * &lt;p&gt;
     * Implementations may throw {@link ConcurrentModificationException} from
     * Stream methods if they detect a conflict while the Stream is active.
     *
     * @return A {@link Stream} over all of the quads in the dataset
     */
    Stream&lt;? extends Quad&gt; stream();

    /**
     * Get all quads contained by the dataset matched with the pattern.
     * &lt;p&gt;
     * The iteration does not contain any duplicate quads, as determined by the
     * {@link Quad#equals(Object)} method for each {@link Quad}.
     * &lt;p&gt;
     * The behaviour of the {@link Stream} is not specified if
     * {@link #add(Quad)}, {@link #remove(Quad)} or {@link #clear()} are called
     * on the {@link Dataset} before it terminates.
     * &lt;p&gt;
     * Implementations may throw {@link ConcurrentModificationException} from
     * Stream methods if they detect a conflict while the Stream is active.
     *
     * @param graphName
     *            The graph the quad belongs to, wrapped as an {@link Optional}
     *            (&lt;code&gt;null&lt;/code&gt; is a wildcard, {@link Optional#empty()} is
     *            the default graph)
     * @param subject
     *            The quad subject (&lt;code&gt;null&lt;/code&gt; is a wildcard)
     * @param predicate
     *            The quad predicate (&lt;code&gt;null&lt;/code&gt; is a wildcard)
     * @param object
     *            The quad object (&lt;code&gt;null&lt;/code&gt; is a wildcard)
     * @return A {@link Stream} over the matched quads.
     */
    Stream&lt;? extends Quad&gt; stream(Optional&lt;BlankNodeOrIRI&gt; graphName, BlankNodeOrIRI subject, IRI predicate,
            RDFTerm object);

    /**
     * Get an Iterable for iterating over all quads in the dataset.
     * &lt;p&gt;
     * This method is meant to be used with a Java for-each loop, e.g.:
     * 
     * &lt;pre&gt;
     * for (Quad t : dataset.iterate()) {
     *     System.out.println(t);
     * }
     * &lt;/pre&gt;
     * 
     * The behaviour of the iterator is not specified if {@link #add(Quad)},
     * {@link #remove(Quad)} or {@link #clear()}, are called on the
     * {@link Dataset} before it terminates. It is undefined if the returned
     * {@link Iterator} supports the {@link Iterator#remove()} method.
     * &lt;p&gt;
     * Implementations may throw {@link ConcurrentModificationException} from
     * Iterator methods if they detect a concurrency conflict while the Iterator
     * is active.
     * &lt;p&gt;
     * The {@link Iterable#iterator()} must only be called once, that is the
     * Iterable must only be iterated over once. A {@link IllegalStateException}
     * may be thrown on attempt to reuse the Iterable.
     *
     * @return A {@link Iterable} that returns {@link Iterator} over all of the
     *         quads in the dataset
     * @throws IllegalStateException
     *             if the {@link Iterable} has been reused
     * @throws ConcurrentModificationException
     *             if a concurrency conflict occurs while the Iterator is
     *             active.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    default Iterable&lt;Quad&gt; iterate() throws ConcurrentModificationException, IllegalStateException {
<span class="nc" id="L286">        return ((Stream&lt;Quad&gt;) stream())::iterator;</span>
    }

    /**
     * Get an Iterable for iterating over the quads in the dataset that match
     * the pattern.
     * &lt;p&gt;
     * This method is meant to be used with a Java for-each loop, e.g.:
     * 
     * &lt;pre&gt;
     * IRI alice = factory.createIRI(&quot;http://example.com/alice&quot;);
     * IRI knows = factory.createIRI(&quot;http://xmlns.com/foaf/0.1/&quot;);
     * for (Quad t : dataset.iterate(null, alice, knows, null)) {
     *     System.out.println(t.getGraphName());
     *     System.out.println(t.getObject());
     * }
     * &lt;/pre&gt;
     * &lt;p&gt;
     * The behaviour of the iterator is not specified if {@link #add(Quad)},
     * {@link #remove(Quad)} or {@link #clear()}, are called on the
     * {@link Dataset} before it terminates. It is undefined if the returned
     * {@link Iterator} supports the {@link Iterator#remove()} method.
     * &lt;p&gt;
     * Implementations may throw {@link ConcurrentModificationException} from
     * Iterator methods if they detect a concurrency conflict while the Iterator
     * is active.
     * &lt;p&gt;
     * The {@link Iterable#iterator()} must only be called once, that is the
     * Iterable must only be iterated over once. A {@link IllegalStateException}
     * may be thrown on attempt to reuse the Iterable.
     *
     * @param graphName
     *            The graph the quad belongs to, wrapped as an {@link Optional}
     *            (&lt;code&gt;null&lt;/code&gt; is a wildcard, {@link Optional#empty()} is
     *            the default graph)
     * @param subject
     *            The quad subject (&lt;code&gt;null&lt;/code&gt; is a wildcard)
     * @param predicate
     *            The quad predicate (&lt;code&gt;null&lt;/code&gt; is a wildcard)
     * @param object
     *            The quad object (&lt;code&gt;null&lt;/code&gt; is a wildcard)
     * @return A {@link Iterable} that returns {@link Iterator} over the
     *         matching quads in the dataset
     * @throws IllegalStateException
     *             if the {@link Iterable} has been reused
     * @throws ConcurrentModificationException
     *             if a concurrency conflict occurs while the Iterator is
     *             active.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    default Iterable&lt;Quad&gt; iterate(Optional&lt;BlankNodeOrIRI&gt; graphName, BlankNodeOrIRI subject, IRI predicate,
            RDFTerm object) throws ConcurrentModificationException, IllegalStateException {
<span class="nc" id="L338">        return ((Stream&lt;Quad&gt;) stream(graphName, subject, predicate, object))::iterator;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>